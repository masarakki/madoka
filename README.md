# 住所を世界から消すためのシステム

住所はセキュアじゃないので地球上から消さねばならない。
少なくとも人類個々人が脳に記憶できてはいけない。

このシステムは、人類が住所を知らなくて済む世界を実現するために、
住所情報の参照を認可する仕組みを実現する。

## なぜ住所がセキュアじゃないのか

住所は個人情報であり、特に所在する場所をダイレクトに特定できてしまうため、扱いには注意を要する。
住所の変更には引っ越しという非常に高コストな作業が必要で、それまでに構築した生活がすべて破壊されてしまう。
その割に、非常に覚えやすく、途中まででもある程度の範囲に絞れていくので危険性が高い。
個人情報に対するリテラシーのない幼い子供でも覚えてしまえるという大きな問題がある。

## 登場人物

この世界には、住所を知るべき人と住所を知るべきではない人がいる。
住所を知るべき人は、主に **配送業者** である。
そして、人間を住所にアサインする人、つまり **不動産屋** のような人である。
もしかしたら国や役所は必要かもしれない。

住所を知るべきではない人は、 **それ以外のすべての人** である。
本当に知る必要がないのである。

なお、便宜的に住所と呼んでいるが、将来的にはGPSの位置にアクセスする権利になるかもしれない。

## 認可の仕組み

### 住所を閲覧する

住所の閲覧には、配送業者などの特別な権限と、特定ユーザに紐付いた時限付きトークンが必要。
オンラインショップを含む一般のユーザには、住所を閲覧する権限はない。
逆に、配送業者にはトークンを発行する権限がない。

ユーザAがユーザBに配送業者Xを利用して荷物が送りたいという状態を想定する。
Aは個人の場合も、オンラインショップの場合もある。

1. AとBの組を登録する。 AにはBのトークンを発行する権利があるという意味である。
   1. 権利は、1回きりの場合と無限にできる場合がある。
   2. Bはいつでも権限をRevokeできる
   3. Aがオンラインショップの場合、OAuthで権限を取得する。
   4. Aが個人の場合はメール等でやりとりして権限を取得する。最終的にBにトークン発行権を与えていいか確認が行く。
2. Aは業者XがBの住所を閲覧できる時限付きトークンを生成する。
   1. 業者X以外の別の業者はこのトークンを利用しても住所を閲覧できない。
3. Aは配送業者Xに荷物とトークンを渡す。
4. Xはトークンを利用し住所を閲覧し配送する。

次回、AがBに荷物を送りたい場合に同じフローを通っても、時限付きトークンは毎回変更されるので、送る相手が前回と同じ人だとシステム的に確定させるのは難しい。

### 住所を登録する

住所の登録は、不動産屋などの特別な権限が必要。
不動産屋のシステムにOAuthでログインしてもらい、入居者Aの書き込み権限を取得し、住所を登録する。
書き込み権限は1度使うとでRevokeされる。
これにより、入居者Aは自分の住所を知ることがなくなる。
